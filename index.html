<!DOCTYPE HTML>
<HTML>

  <head>

    <title>ReactDashboard</title>

    <script src="js/react.js"></script>
    <script src="js/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <style>
      body {
      background-color: #E8E8E8;
      }
      .product {
      border: 5px solid cyan;
      width: 400px;
      }
    </style>

  </head>
  
  <body>
    
    <h1>ReactDasboard</h1>
    
    <div id="inventory-dashboard"></div>

  </body>
  
    <script type="text/jsx">
    var ProductList = React.createClass({
	getInitialState: function() {
	    return {data: []};
	},
	componentDidMount: function() {
	    $.ajax({
		url:this.props.url,
		dataType: 'json',
		cache: false,
		success: function(data) {
		    this.setState({data: data});
		}.bind(this),
		error: function(xhr,status, err){
		    console.error(this.props.url, status, err.toString());
		}.bind(this)
	    });
	},
	render: function() {
	    return (
		    <div className="productList">
		    <h1>Products</h1>
		    <Product data={this.state.data}></Product>
		    </div>
	    );
	}
    });
var Product = React.createClass({
    render: function() {
	var productNodes = this.props.data.map(function (product) {
	    return (
		    <div className="product">
		    <b>Name:</b> {product.item_name} <br />
		    <b>Stockable:</b>{product.item_stockable}<br />
		    <b>price:</b>{product.item_price}<br/>
		    <b>Instock:</b>{product.item_instock}<br/>
		    <b>Type:</b>{product.item_type}<br/>
		    <b>id:</b>{product.item_sku}<br/>
		    <b>token:</b>{product._id}
		    </div>
	    );
	});
	return (
		<div className="products">
		{productNodes}
	    </div>
	);
    }
});

    React.render(
    <ProductList url="http://127.0.0.1:5000/products" />,
    document.getElementById('inventory-dashboard'));
    
</script>  

</HTML>
